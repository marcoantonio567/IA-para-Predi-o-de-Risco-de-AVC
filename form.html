<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Formulário de Avaliação</title>
    <link rel="stylesheet" href="estilo.css">
</head>

<body>
    <main>
        <section class="container">
            <div class="card" aria-labelledby="form-title">
                <h1 id="form-title" class="title">Avaliação de Risco — Dados do Paciente</h1>
                <p class="subtitle">Preencha todos os campos obrigatórios para prosseguir.</p>
                <form id="avaliacao-risco" method="post" novalidate>
                    <div class="form-grid" role="group" aria-describedby="form-desc">
                        <span id="form-desc" class="hint">Todos os campos são obrigatórios.</span>

                        <div class="form-field">
                            <fieldset>
                                <legend>Gênero <span class="required-badge">Obrigatório</span></legend>
                                <div class="control" role="radiogroup" aria-required="true"
                                    aria-label="Seleção de gênero">
                                    <label for="genero-m">
                                        <input id="genero-m" name="genero" type="radio" value="Masculino" required>
                                        Masculino
                                    </label>
                                    <label for="genero-f">
                                        <input id="genero-f" name="genero" type="radio" value="Feminino" required>
                                        Feminino
                                    </label>
                                </div>
                            </fieldset>
                        </div>

                        <div class="form-field">
                            <div class="stack">
                                <div class="form-control">
                                    <input id="idade" name="idade" type="number" inputmode="numeric"
                                        min="0" max="120" required>
                                    <label for="idade"><span style="transition-delay:0ms">I</span><span style="transition-delay:50ms">d</span><span style="transition-delay:100ms">a</span><span style="transition-delay:150ms">d</span><span style="transition-delay:200ms">e</span></label>
                                </div>
                                <span class="hint">Valor entre 0 e 120.</span>
                            </div>
                        </div>

                        <div class="form-field">
                            <fieldset>
                                <legend>Hipertensão <span class="required-badge">Obrigatório</span></legend>
                                <div class="control" role="radiogroup" aria-required="true"
                                    aria-label="Status de hipertensão">
                                    <label for="hipertensao-sim">
                                        <input id="hipertensao-sim" name="hipertensao" type="radio" value="Sim"
                                            required>
                                        Sim
                                    </label>
                                    <label for="hipertensao-nao">
                                        <input id="hipertensao-nao" name="hipertensao" type="radio" value="Não"
                                            required>
                                        Não
                                    </label>
                                </div>
                            </fieldset>
                        </div>

                        <div class="form-field">
                            <fieldset>
                                <legend>Doença Cardíaca <span class="required-badge">Obrigatório</span></legend>
                                <div class="control" role="radiogroup" aria-required="true"
                                    aria-label="Status de doença cardíaca">
                                    <label for="doenca-sim">
                                        <input id="doenca-sim" name="doenca_cardiaca" type="radio" value="Sim" required>
                                        Sim
                                    </label>
                                    <label for="doenca-nao">
                                        <input id="doenca-nao" name="doenca_cardiaca" type="radio" value="Não" required>
                                        Não
                                    </label>
                                </div>
                            </fieldset>
                        </div>

                        <div class="form-field">
                            <div class="stack">
                                <label for="tipo_trabalho">
                                    Tipo de Trabalho <span class="required-badge">Obrigatório</span>
                                    <select id="tipo_trabalho" name="tipo_trabalho" required>
                                        <option value="" disabled selected>Selecione uma opção</option>
                                        <option>Emprego Público</option>
                                        <option>Privado</option>
                                        <option>Empreendedor</option>
                                        <option>Criança</option>
                                        <option>Nunca trabalhou</option>
                                    </select>
                                </label>
                            </div>
                        </div>

                        <div class="form-field">
                            <fieldset>
                                <legend>Tipo de Residência <span class="required-badge">Obrigatório</span></legend>
                                <div class="control" role="radiogroup" aria-required="true"
                                    aria-label="Tipo de residência">
                                    <label for="res-urbana">
                                        <input id="res-urbana" name="tipo_residencia" type="radio" value="Urbana"
                                            required>
                                        Urbana
                                    </label>
                                    <label for="res-rural">
                                        <input id="res-rural" name="tipo_residencia" type="radio" value="Rural"
                                            required>
                                        Rural
                                    </label>
                                </div>
                            </fieldset>
                        </div>

                        <div class="form-field">
                            <div class="stack">
                                <div class="form-control">
                                    <input id="nivel_glicose" name="nivel_glicose" type="number" inputmode="decimal"
                                        min="0" max="300" step="0.1"
                                        required>
                                    <label for="nivel_glicose"><span style="transition-delay:0ms">N</span><span style="transition-delay:50ms">í</span><span style="transition-delay:100ms">v</span><span style="transition-delay:150ms">e</span><span style="transition-delay:200ms">l</span><span style="transition-delay:250ms"> </span><span style="transition-delay:300ms">M</span><span style="transition-delay:350ms">é</span><span style="transition-delay:400ms">d</span><span style="transition-delay:450ms">i</span><span style="transition-delay:500ms">o</span><span style="transition-delay:550ms"> </span><span style="transition-delay:600ms">d</span><span style="transition-delay:650ms">e</span><span style="transition-delay:700ms"> </span><span style="transition-delay:750ms">G</span><span style="transition-delay:800ms">l</span><span style="transition-delay:850ms">i</span><span style="transition-delay:900ms">c</span><span style="transition-delay:950ms">o</span><span style="transition-delay:1000ms">s</span><span style="transition-delay:1050ms">e</span><span style="transition-delay:1100ms"> </span><span style="transition-delay:1150ms">(</span><span style="transition-delay:1200ms">m</span><span style="transition-delay:1250ms">g</span><span style="transition-delay:1300ms">/</span><span style="transition-delay:1350ms">D</span><span style="transition-delay:1400ms">L</span><span style="transition-delay:1450ms">)</span></label>
                                </div>
                                <span class="hint">Valor entre 0 e 300, com passo 0,1.</span>
                            </div>
                        </div>

                        <div class="form-field">
                            <div class="stack">
                                <div class="form-control">
                                    <input id="imc" name="imc" type="number" inputmode="decimal"
                                     min="0" max="100" step="0.1" required>
                                    <label for="imc"><span style="transition-delay:0ms">I</span><span style="transition-delay:50ms">M</span><span style="transition-delay:100ms">C</span><span style="transition-delay:150ms"> </span><span style="transition-delay:200ms">(</span><span style="transition-delay:250ms">Í</span><span style="transition-delay:300ms">n</span><span style="transition-delay:350ms">d</span><span style="transition-delay:400ms">i</span><span style="transition-delay:450ms">c</span><span style="transition-delay:500ms">e</span><span style="transition-delay:550ms"> </span><span style="transition-delay:600ms">d</span><span style="transition-delay:650ms">e</span><span style="transition-delay:700ms"> </span><span style="transition-delay:750ms">M</span><span style="transition-delay:800ms">a</span><span style="transition-delay:850ms">s</span><span style="transition-delay:900ms">s</span><span style="transition-delay:950ms">a</span><span style="transition-delay:1000ms"> </span><span style="transition-delay:1050ms">C</span><span style="transition-delay:1100ms">o</span><span style="transition-delay:1150ms">r</span><span style="transition-delay:1200ms">p</span><span style="transition-delay:1250ms">o</span><span style="transition-delay:1300ms">r</span><span style="transition-delay:1350ms">a</span><span style="transition-delay:1400ms">l</span><span style="transition-delay:1450ms">)</span></label>
                                </div>
                                <span class="hint">Valor entre 0 e 100, com passo 0,1.</span>
                            </div>
                        </div>

                        <div class="form-field">
                            <div class="stack">
                                <label for="status_fumo">
                                    Status de Fumo <span class="required-badge">Obrigatório</span>
                                    <select id="status_fumo" name="status_fumo" required>
                                        <option value="" disabled selected>Selecione uma opção</option>
                                        <option>Fuma atualmente</option>
                                        <option>Fumava no passado</option>
                                        <option>Nunca fumou</option>
                                        <option>Não sei</option>
                                    </select>
                                </label>
                            </div>
                        </div>

                    </div>
                    <div class="actions">
                        <button type="submit">Enviar</button>
                    </div>
                </form>
            </div>
        </section>
    </main>

    <script>
        const form = document.getElementById('avaliacao-risco');
        const numericFields = [
            { el: document.getElementById('idade'), min: 0, max: 120, label: 'Idade' },
            { el: document.getElementById('nivel_glicose'), min: 0, max: 300, label: 'Nível de glicose' },
            { el: document.getElementById('imc'), min: 0, max: 100, label: 'IMC' }
        ];

        function validateNumberField(field, min, max, label) {
            const value = field.value.trim();
            if (value === '') { field.setCustomValidity('Este campo é obrigatório.'); return; }
            const num = Number(value.replace(',', '.'));
            if (Number.isNaN(num)) { field.setCustomValidity('Insira um número válido.'); return; }
            if (num < min || num > max) { field.setCustomValidity(label + ' deve estar entre ' + min + ' e ' + max + '.'); return; }
            field.setCustomValidity('');
        }

        numericFields.forEach(({ el, min, max, label }) => {
            el.addEventListener('input', () => validateNumberField(el, min, max, label));
            el.addEventListener('blur', () => validateNumberField(el, min, max, label));
        });

        form.addEventListener('submit', (e) => {
            numericFields.forEach(({ el, min, max, label }) => validateNumberField(el, min, max, label));
            if (!form.checkValidity()) { e.preventDefault(); form.reportValidity(); }
        });
    </script>
</body>

</html>